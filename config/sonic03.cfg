sudo config hostname sonic03
sudo config interface ip add Loopback0 10.0.0.3/32
sudo config interface ip add Loopback0 fc00:0:3::1/128
sudo config interface ip add Ethernet0 10.1.1.1/31
sudo config interface ip add Ethernet4 10.1.1.9/31
sudo config interface ip add Ethernet8 10.1.1.16/31
sudo config interface ip add Ethernet12 10.1.1.18/31
sudo config interface ip add Ethernet16 10.1.1.20/31
sudo config interface ip add Ethernet20 10.1.1.22/31

sudo config interface ip add Ethernet0 fc00::1/127
sudo config interface ip add Ethernet4 fc00::9/127
sudo config interface ip add Ethernet8 fc00::16/127
sudo config interface ip add Ethernet12 fc00::18/127
sudo config interface ip add Ethernet16 fc00::20/127
sudo config interface ip add Ethernet20 fc00::22/127

sudo config interface ipv6 enable use-link-local-only Ethernet0
sudo config interface ipv6 enable use-link-local-only Ethernet4
sudo config interface ipv6 enable use-link-local-only Ethernet8
sudo config interface ipv6 enable use-link-local-only Ethernet12
sudo config interface ipv6 enable use-link-local-only Ethernet16
sudo config interface ipv6 enable use-link-local-only Ethernet20


hostname sonic03
!
ipv6 route fc00:0:3::/64 Loopback0
!
router bgp 65003
 bgp router-id 10.0.0.3
 bgp log-neighbor-changes
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 bgp bestpath as-path multipath-relax
 neighbor 10.1.1.0 remote-as 65001

 neighbor fc00:: remote-as 65001
 neighbor fc00::8 remote-as 65002
 neighbor fc00::17 remote-as 65000
 neighbor fc00::19 remote-as 65000
 neighbor fc00::21 remote-as 65000
 neighbor fc00::23 remote-as 65000

 neighbor Ethernet0 interface remote-as 65001
 neighbor Ethernet4 interface remote-as 65002
 neighbor Ethernet8 interface remote-as 65000
 neighbor Ethernet12 interface remote-as 65000
 neighbor Ethernet16 interface remote-as 65000
 neighbor Ethernet20 interface remote-as 65000
 !
 address-family ipv4 unicast
  network 10.0.0.3/32
  neighbor 10.1.1.0 activate
  maximum-paths 64
  neighbor Ethernet0 activate
  neighbor Ethernet4 activate
  neighbor Ethernet8 activate
  neighbor Ethernet12 activate
  neighbor Ethernet16 activate
  neighbor Ethernet20 activate
 exit-address-family
 !
 address-family ipv6 unicast
  network fc00:0:3::1/128
  maximum-paths 64
  neighbor Ethernet0 activate
  neighbor Ethernet4 activate
  neighbor Ethernet8 activate
  neighbor Ethernet12 activate
  neighbor Ethernet16 activate
  neighbor Ethernet20 activate

  neighbor fc00:: activate
  neighbor fc00::8 activate
  neighbor fc00::17 activate
  neighbor fc00::19 activate
  neighbor fc00::21 activate
  neighbor fc00::23 activate

 exit-address-family
exit
!
ip prefix-list PL_LoopbackV4 seq 5 permit 10.0.0.3/32
!
ipv6 prefix-list PL_LoopbackV6 seq 5 permit fc00:0:3::/64
!
route-map RM_SET_SRC permit 10
 set src 10.0.0.3
exit
!
route-map RM_SET_SRC6 permit 10
 set src fc00:0:3::1
exit
!
ip nht resolve-via-default
!
ip protocol bgp route-map RM_SET_SRC
!
ipv6 protocol bgp route-map RM_SET_SRC6